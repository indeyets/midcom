<Schema xmlns="http://www.midgard-project.org/repligard/1.4">
    <!-- org.openpsa.calendar objects -->
    <type name="org_openpsa_event" table="event">
        <!-- Copied from NewMidgardevent -->
        <property name="id" type="integer" primaryfield="id"/>
        <property name="start" type="integer"/>
        <property name="end" type="integer"/>
        <property name="title" type="string"/>
        <property name="description" type="text"/>
        <property name="type" type="integer"/>
        <property name="extra" type="text"/>
        <property name="busy" type="boolean"/>
        <property name="revised" type="string"/>
        <property name="revision" type="integer"/>
        <property name="created" type="string"/>
        <property name="locked" type="string"/>
        <property name="owner" link="midgard_group:id" reverse="no" type="integer"/>
        <property name="creator" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="revisor" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="locker" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="up" upfield="up" type="integer" link="org_openpsa_event:id"/>
        <!-- /Copied from NewMidgardevent -->

        <property name="location" type="string" />
        <property name="tentative" type="boolean" />
        <!-- At least untill we have mRFC 0018 -->
        <property name="externalGuid" type="string" />
        <!-- At least untill we can store arrays with DBA -->
        <property name="vCalSerialized"  type="text" />

        <!-- Common OpenPSA properties -->

        <!-- Shortcut for various ACL scenarios -->
        <property name="orgOpenpsaAccesstype" type="integer"/>
        <!-- Used to a) distinguish OpenPSA objects in QB b) store object "subtype" (project vs task etc) -->
        <property name="orgOpenpsaObtype" type="integer"/>
        <!-- will contain bitmask as integer, 00(int=0) not a workgroup, 01(int=1) is workgroup
             but not active, 11(int=3) active workgroup -->
        <property name="orgOpenpsaWgtype" type="integer"/>
        <!-- The "owner" workgroup of this object -->
        <property name="orgOpenpsaOwnerWg" type="string"/>

        <!-- /Common OpenPSA properties -->
    </type>

    <type name="org_openpsa_eventmember" table="eventmember" parent="org_openpsa_event" parentfield="eid">
        <!-- NewMidgardEventmember properties -->
        <property name="id" type="integer" primaryfield="id"/>
        <property name="period" type="integer"/>
        <property name="count" type="integer"/>
        <property name="extra" type="text"/>
        <property name="uid" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="eid" link="org_openpsa_event:id" type="integer" parentfield="eid"/>
        <!-- /NewMidgardEventmember properties -->

        <property name="hoursReported" type="integer" />

        <!-- Common OpenPSA properties -->

        <!-- Used to a) distinguish OpenPSA objects in QB b) store object "subtype" (project vs task etc) -->
        <property name="orgOpenpsaObtype" type="integer"/>

        <!-- /Common OpenPSA properties -->

        <!-- required metadata -->
        <property name="revised" type="string"/>
        <property name="revision" type="integer"/>
        <property name="created" type="string"/>
        <property name="creator" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="revisor" link="midgard_person:id" reverse="no" type="integer"/>
        <!-- /required metadata -->
    </type>

    <type name="org_openpsa_calendar_resource" table="org_openpsa_calendar_resource" parent="midgard_person" parentfield="owner">
        <property name="id" type="integer" primaryfield="id"/>
        <property name="name" type="string"/>
        <property name="title" type="string"/>
        <property name="description" type="text"/>
        <property name="location" type="text"/>
        <property name="capacity" type="float"/>
        <property name="type" type="string"/>
        <property name="period" type="string" dbtype="varchar(1)" />
        <property name="owner" link="midgard_person:id" reverse="no" type="integer" parentfield="owner"/>

        <!-- required 1.7 metadata -->
        <property name="revised" type="string"/>
        <property name="revision" type="integer"/>
        <property name="created" type="string"/>
        <property name="creator" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="revisor" link="midgard_person:id" reverse="no" type="integer"/>
        <!-- /required 1.7 metadata -->
    </type>

    <type name="org_openpsa_calendar_event_resource" table="org_openpsa_calendar_event_resource" parent="org_openpsa_event" parentfield="event">
        <property name="id" type="integer" primaryfield="id"/>

        <property name="resource" link="org_openpsa_calendar_resource:id" reverse="no" type="integer"/>
        <property name="event" link="org_openpsa_event:id" reverse="no" type="integer" parentfield="event"/>

        <property name="description" type="text"/>

        <!-- required 1.7 metadata -->
        <property name="revised" type="string"/>
        <property name="revision" type="integer"/>
        <property name="created" type="string"/>
        <property name="creator" link="midgard_person:id" reverse="no" type="integer"/>
        <property name="revisor" link="midgard_person:id" reverse="no" type="integer"/>
        <!-- /required 1.7 metadata -->
    </type>
    <!-- /org.openpsa.calendar objects -->
</Schema>