<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Aegir 2 - a new dawn?</title>
<!-- metadata -->
<meta name="generator" content="S5" />
<meta name="version" content="S5 1.1" />
<meta name="presdate" content="20050728" />
<meta name="author" content="Eric A. Meyer" />
<meta name="company" content="Complex Spiral Consulting" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<link rel="stylesheet" href="ui/default/slides.css" type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/default/outline.css" type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/default/print.css" type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/default/opera.css" type="text/css" media="projection" id="operaFix" />
<!-- S5 JS -->
<script src="ui/default/slides.js" type="text/javascript"></script>
</head>
<body>

<div class="layout">
<div id="controls"><!-- DO NOT EDIT --></div>
<div id="currentSlide"><!-- DO NOT EDIT --></div>
<div id="header"></div>
<div id="footer">
<h1>[Midgard developer conference 29.10.2005]</h1>
<h2>[Get ready for Aegir 2]</h2>
</div>

</div>


<div class="presentation">


<!--
Goals for me:

* teach people to write A2 modules 
* get people interested in A2
* Make some A2 modules

-->

<div class="slide">

<h1>Aegir 2</h1>

</div>


<div class="slide">

<h1>Aegir v2 - goals</h1>

<ul>
<li>Simple to learn for people who have used Aegir 1</li>
<li>Simple to extend</li>
<li>Simple design</li>
<li>Nice looking</li>
</ul>

</div>

<div class="slide">
<h1>.. some more technical goals </h1>

<p>
Provide what Aegir used to do:
</p> 
<ul>
<li>Object interface</li>
<li>Replication / approval </li>
<li>Single admin metafor </li>
<li>User and groups </li>
</ul>
<p>Solve the problems problems Aegir had:</p> 

<ul><li>Messy code</li>
<li>Hard to extend</li>
<li>Buggy</li>
<li>Frames</li>
</ul>

<p>not there yet!</p>
</div>

<div class="slide">

<h1> framework </h1>
<p>Aegir is mainly just a very special midcom that provides a wrapper around other midcoms. </p>
<p>The main midcom provides the following services: 
<ul>
<li>Navigation and breadcrumbs </li>
<li>UI styling </li>
<li>Module startup</li>
</ul>
</p>
<p>All Aegir modules are just normal baseclass_interface classes with a Aegir handler class and a Aegir navigaiton class.
</p>
<p>Documentation: <a href=http://www.midgard-project.org/documentation/writing-aegir-modules/">http://www.midgard-project.org/documentation/writing-aegir-modules/</a></p>

</div>
<div class="slide">
<h1>Instalation</h1>
<p>As Aegir is just another midcom, all you have to do is make a topic using the midcom.admin.aegir module.</p>
</div>
<div class="slide">

<h1> framework - startup</h1>

<p>Aegir is a normal midcom working through the 3 normal midcom interfaces:
</p>
<ul>
<li>can_handle()</li>
<li>handle()</li>
<li>show()</li>
</ul>
</div>
<div class="slide">
    <h1> framework - module registry </h1>
    <pre>
'registry' => array (
    'simplecontent' => array (
        'component' => 'midcom.admin.simplecontent',
        'name'      => 'Topics and Articles',
        'hide'      => 0,
        ),
    'rcs'           => array (
        'component' => 'no.bergfald.rcs',
        'name'      => 'Version control',
        'hide'      => true,
    ),
    'objectbrowser' => array (
        'component' => 'no.bergfald.objectbrowser',
        'name'      => 'Objectbrowser',
        'hide'      => 0, 
    ),
    'ais'           => array (
        'component' => 'midcom.admin.modules',
        'name'      => 'Content editor',
        'hide'      => 0, 
    ), 
)
    </pre>

<p>
    As we see, the registry provides a simple way to 
    add which modules should be shown in the navigatonal area and 
    a mapping between urls and modules.</p>
    <p>Why not just use component names in the urls?</p>
       
</div>

<div class="slide">
<h1> Aegir interface </h1>
<p> The aegir interface class provides an entry into the Aegir spesific parts of the application. </p>
<p> The most important part to extend is the get_request_switch() function. </p>
<p>Also you can use the interface to gain access to the navigation class</p>

<p>To support component reuse, as much Aegir spesific work as possible should be done in the Aegir interface class. </p>
</div>

<div class="slide">
<p>The component has a simple way to check if it exists: </p>


<pre>
if (array_key_exists('aegir_interface', $this->_request_data)) {
    do_something_when_in_aegir();
} 
</pre>

</div>
<div class="slide">
<h1>Aegir toolbars </h1>
<p>
The toolbars class is a simple class that is used to contain a set of toolbars used throughout the application.
</p>
<p>
It's a static class so you can add and remove from it whenever you feel like doing so.
</p>

</div>
<div class="slide">
<p>Quick example from simplecontent:</p>
<pre>
        $toolbars =& midcom_helper_toolbars::get_instance();
        for ($i = count($nodepath) -1; $i >= 0;$i--) {
            $toolbars->aegir_location->add_item(
            array (
                MIDCOM_TOOLBAR_URL =>  $nodepath[$i][MIDCOM_NAV_URL],
                MIDCOM_TOOLBAR_LABEL => $nodepath[$i][MIDCOM_NAV_NAME],
                MIDCOM_TOOLBAR_HELPTEXT => '',
                MIDCOM_TOOLBAR_ICON => '',
                MIDCOM_TOOLBAR_ENABLED => true,
                MIDCOM_TOOLBAR_HIDDEN => false 
                )
            );
         }

</pre>
</div><div class="slide">
<h1>midcom_helper_toolbars</h1>
<p> There's a number of different toolbars that may be edited through this interface: </p>
<ul>
<li>aegir_location - the breadcrumb </li>
<li>aegir_menu - the Aegir top menu</li>
<li>top - the top area of the editing menu</li>
<li>bottom - the bottom area </li>
</ul>

</div>

<div class="slide">
<h1> Navigation </h1>
<ul>
<li>As for normal midcom s you have to provide your own navigation class.</li>
<li>It uses an interface very much like the normal midcom_helper_nav <br/>
except that you have to provide
<ul><li> get_node() </li>
<li>list_nodes()</li>
</ul>
</li>

<li>Navigation does not set any constraints on how leaf id's may ... <br>
be except that '0' must be the root. </li>
  </ul>
</div>

<div class="slide">
<h1>AIS </h1>

<p>How should AIS and Aegir relate? </p>
<p>IMHO Ais should be like Aegir: a simple admin portal. </p>
<p>Thus, what is needed is a rewrite of AIS as a set of modules and then integrate them</p>

</div>


<div class="slide">
<h1>What is missing? </h1>
<ul>
<lI>Attachment handling </li>
<li>Parameters</li>
<li>AIS</li>
<li>Style editor</li>
<li>Portal component</li>
<li>Slide maker</li>
<li>A module for creating other modules</li>
<li>Anything you want to use Aegir for</li>
</ul>

</div>

<div class="slide">
    <h1>Attachments</h1>
    
  <ul>
    <li>n.s.photos needs some deep love<br/>
    </li>
    <li>
        It should be the backend for an attachments widget.
    </li>
  </ul>
  
</div>
<div class="slide">
<h1>Styles</h1>
<p>Not realy a Aegir issue - except for the editor</p>

</div>

<div class="slide"> 

<h1> wishlist </h1>
<ol>
<li>Preformance, performance, performance!</li>
<li>testing,testing, testing</li>
<li>Paged midcom!</li>
<li>Get rid of evals ( <a href="http://blog.joshuaeichorn.com/archives/2005/08/01/using-eval-in-php/">why</a>)
<li>A editable stylestack</li>
<lI>A memcached object cache</li>
<li>Simplify the dm process even more</li>
<li>Better handling of outside applications</li>

<li>Find ways to make Midcom a faster development environment.</li>

</ol>
</div>
<div class="slide">

<h1>Testing </h1>

<p>SimpleTest is very simple and very usable!</p>
<p><a href="http://simpletest.sourceforge.net/">http://simpletest.sourceforge.net/</a>
<pre>

class AegirNavigationTest extends UnitTestCase {
    function setUp() {
        $this->object = new midgard_beer_session();
    }
    function testIfBergieProvidesBeer() {
        $this->assertTrue($this->object->allHasBeer(), "Not everyone has got beer yet!");
    }
}

</pre>

<p>Also usable for testing things like login. </p>
<h2>Problem: All components rely on _MIDCOM for things that could go around it. </h2>
<p>Examples: dbFactory, 
</div>
<div class="slide">

<h1>MidCOM as a faster application development environment</h1>
<ul>
<li>First a dm baseclass would help a lot!</li>
<li>Then </li>

</ul>
</div> 

<div class="slide">
<h1> Kill dynamic_load() </h1>

<ul>
<li>Most places it may be reduced to a smaller and simpler class</li>
<li>We should find a simple way to shift styles around</li>
<li>The overhead of midcom is just to big for most small jobs</li>
<li>Someone summed it up quite nicely yesterday: The bad thing is that it is urlbased.
</ul>
</div>


</div>

</body>
</html>
