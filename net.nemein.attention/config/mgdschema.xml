<?xml version="1.0" encoding="UTF-8"?>
<Schema xmlns="http://www.midgard-project.org/repligard/1.4">
    <!-- APML concept -->
    <type name="net_nemein_attention_concept" table="net_nemein_attention_concept" parent="midgard_person" parentfield="person">
        <property name="id" type="integer" primaryfield="id"/>
        
        <!-- Concepts are always specific to a person -->
        <property name="person" link="midgard_person:id" reverse="no" type="integer" parentfield="person"/>
        
        <!-- Concepts can belong to a single profile at time -->
        <property name="profile" type="string"/>
                
        <!-- The following fields correspond to attributes of an APML concept element:
             
             * concept: "key" of APML concept
             * value: "value" of APML concept
             * source: "from" URL 
        -->
        <property name="concept" type="string"/>
        <property name="value" type="float"/>
        <property name="source" type="string"/>
        
        <!-- Concepts can be implicit or explicit -->
        <property name="explicit" type="boolean"/>
    </type>
    
    <!-- APML source -->
    <type name="net_nemein_attention_source" table="net_nemein_attention_source" parent="midgard_person" parentfield="person">
        <property name="id" type="integer" primaryfield="id"/>
        
        <!-- Sources are always specific to a person -->
        <property name="person" link="midgard_person:id" reverse="no" type="integer" parentfield="person"/>
        
        <!-- Sources can belong to a single profile at time -->
        <property name="profile" type="string"/>
                
        <!-- The following fields correspond to attributes of an APML source element:
             
             * title: "name" of APML source
             * url: "key" of APML source
             * type: MIME "type" of APML source
             * value: "value" of APML source
             * source: "from" URL 
        -->
        <property name="title" type="string"/>
        <property name="url" type="string"/>
        <property name="type" type="string"/>
        <property name="value" type="float"/>
        <property name="source" type="string"/>
        
        <!-- Sources can be implicit or explicit -->
        <property name="explicit" type="boolean"/>
    </type>

    <!-- AttentionTrust.org clickstream item, see http://wiki.attentiontrust.org/extension/spec -->
    <type name="net_nemein_attention_click" table="net_nemein_attention_click" parent="midgard_person" parentfield="person">
        <!-- Clicks are always specific to a person -->
        <property name="person" link="midgard_person:id" reverse="no" type="integer" parentfield="person"/>
    
        <!-- Click GUID coming from the recorder -->
        <property name="name" type="string"/>
        
        <!-- Page title if available-->
        <property name="title" type="string"/>
        
        <!-- The clicked URL split to more usable pieces -->
        <property name="protocol" type="string"/>
        <property name="username" type="string"/>
        <property name="password" type="string"/>
        <property name="hostname" type="string"/>
        <property name="port" type="integer"/>        
        <property name="path" type="string"/>
        <property name="query" type="string"/>
        <property name="fragment" type="string"/>
        
        <!-- Request status information -->
        <property name="responsecode" type="integer"/>
        <property name="method" type="string"/>
        <property name="cookie" type="boolean"/>
        <property name="setcookie" type="boolean"/>
        <property name="useragent" type="string"/>
        <property name="ip" type="string"/>
        
        <!-- Clicks can belong to a single profile at time -->
        <property name="profile" type="string"/>
    </type>
</Schema>